<!-- -*- mode: jinja2 -*- -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Discontinuous Galerkin solver with explicit time stepping.">
    <meta name="author" content="University of Siegen" >
    <link rel="icon" href="../../favicon.png">

    <title>Source Term &ndash; Ateles</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="../../css/fontawesome.min.css" rel="stylesheet">
    <link href="../../css/brands.min.css" rel="stylesheet">
    <link href="../../css/regular.min.css" rel="stylesheet">
    <link href="../../css/solid.min.css" rel="stylesheet">
    <link href="../../css/v4-font-face.min.css" rel="stylesheet">
    <link href="../../css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="../../css/local.css" rel="stylesheet">
    <link href="../../css/pygments.css" rel="stylesheet">
    <script src="../../js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="../../index.html">Ateles </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="../index.html">Documentation</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/absint.html">Abstract Interfaces</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/types.html">Derived Types</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="../../lists/programs.html">Programs</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="../../search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <div class="row">
    <h1>Source Term</h1>
    <div class="container p-2 mb-4 bg-light border rounded-3">
      <div class="row align-items-center justify-content-between">
        <div class="col">
          <ul class="list-inline" style="margin-bottom:0px; display:inline">
          </ul>
        </div>
        <div class="col">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-end mb-0">
                <li class="breadcrumb-item"><a href='../index.html'>Documentation</a></li>
                <li class="breadcrumb-item"><a href='index.html'>Tutorial</a></li>
              <li class="breadcrumb-item active" aria-current="page">Source Term</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
      <div class="col-3">
        <div class="card card-body bg-light" id="sidebar-toc">
          <ul class="nav flex-column align-items">
            <li class="nav-item">
              <a class="nav-link" href="../index.html">Documentation</a>
            </li>
          </ul>
          <hr>
          <nav class="nav nav-pills flex-column">
              <a class="nav-link" href="../apes_overview.html">APES Overview</a>
              <a class="nav-link" href="../build_and_run.html">Build and Run Ateles</a>
              <a class="nav-link" href="../examples/index.html">Example setups</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/acoustic/index.html">Acoustic Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/acoustic/gauss_densitypulse_2D/index.html">Gaussian Density Pulse Test Case</a>
              <a class="nav-link" href="../examples/acoustic/planar_wave_3D/index.html">Planar Wave</a>

                </nav>
              <a class="nav-link" href="../examples/euler/index.html">Euler Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/euler/1D/index.html">1D Euler Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/euler/1D/modalEstimate/index.html">Modal estimate for adaptive timesteps 1D</a>
              <a class="nav-link" href="../examples/euler/1D/piston/index.html">Formation of a shock wave ahead of a moving piston in 1D</a>
              <a class="nav-link" href="../examples/euler/1D/piston_modereduction/index.html">Formation of a shock wave ahead of a moving piston in 1D</a>
              <a class="nav-link" href="../examples/euler/1D/shock_stabilization_parallel/index.html">Shock Stabilization Test Case</a>
              <a class="nav-link" href="../examples/euler/1D/toro1_x/index.html">Toro Validation Test Case</a>

                </nav>
              <a class="nav-link" href="../examples/euler/2D/index.html">2D Euler Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/euler/2D/gauss_densitypulse_spongelayer/index.html">Gaussian Density Pulse in 2D</a>
              <a class="nav-link" href="../examples/euler/2D/modalEstimate/index.html">Modal estimate for adaptive timesteps in 2D</a>
              <a class="nav-link" href="../examples/euler/2D/shock_stabilization_parallel/index.html">Shock Stabilization Test Case</a>
              <a class="nav-link" href="../examples/euler/2D/toro1_x/index.html">Toro1 Validation Test Case in X direction</a>
              <a class="nav-link" href="../examples/euler/2D/toro1_y/index.html">Toro1 Validation Test Case in Y direction</a>
              <a class="nav-link" href="../examples/euler/2D/toro2_x/index.html">Toro2 Setup along X for 2D Euler equations</a>
              <a class="nav-link" href="../examples/euler/2D/toro3_x/index.html">Toro3 Setup along X for 2D Euler equations</a>
              <a class="nav-link" href="../examples/euler/2D/toro4_x/index.html">Toro4 setup for 2D Euler equations with a positivity preserving filter</a>
              <a class="nav-link" href="../examples/euler/2D/vorticity/index.html">Vorticity Tracking</a>
              <a class="nav-link" href="../examples/euler/2D/wedge/index.html">Supersonic movement of a wedge</a>
              <a class="nav-link" href="../examples/euler/2D/wedge_modereduction/index.html">Supersonic movement of a wedge</a>

                </nav>
              <a class="nav-link" href="../examples/euler/3D/index.html">3D Euler Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/euler/3D/gauss_densitypulse_deriv_quantity/index.html">Pulse in density with derived quantity</a>
              <a class="nav-link" href="../examples/euler/3D/gauss_densitypulse_fpt/index.html">Euler 3D pulse in density with FPT</a>
              <a class="nav-link" href="../examples/euler/3D/gauss_densitypulse_fxt/index.html">Euler 3D setup of Gaussian pulse in density with FXT</a>
              <a class="nav-link" href="../examples/euler/3D/gauss_densitypulse_l2p/index.html">Euler 3D setup with pulse in density and L2 projection</a>
              <a class="nav-link" href="../examples/euler/3D/gauss_densitypulse_spongelayer/index.html">Euler 3D pulse in density with sponge</a>
              <a class="nav-link" href="../examples/euler/3D/modalEstimate/index.html">Modal estimate in Euler 3D</a>
              <a class="nav-link" href="../examples/euler/3D/multilevel/index.html">Material with Multilevel in Euler 3D</a>
              <a class="nav-link" href="../examples/euler/3D/overview/index.html">Configuration overview for Euler 3D simulations</a>
              <a class="nav-link" href="../examples/euler/3D/p_polynomials/index.html">P-polynomial space</a>
              <a class="nav-link" href="../examples/euler/3D/qCriterion_deriv_quantity/index.html">Q-Criterion Tracking in Euler 3D</a>
              <a class="nav-link" href="../examples/euler/3D/shear_layer_Q4/index.html">Shear-Layer Q4</a>
              <a class="nav-link" href="../examples/euler/3D/shear_layer_Q4_parallel/index.html">Shear-Layer Q4</a>
              <a class="nav-link" href="../examples/euler/3D/shear_layer_Q8/index.html">Shear-Layer Q8</a>
              <a class="nav-link" href="../examples/euler/3D/shock_stabilization_localrefinement/index.html">Shock Stabilization in Euler 3D with local refinement</a>
              <a class="nav-link" href="../examples/euler/3D/shock_stabilization_parallel/index.html">Shock stabilization for 3D Euler equations with RK-Taylor</a>
              <a class="nav-link" href="../examples/euler/3D/shock_stabilization_periodic/index.html">Shock stabilization in periodic domain</a>
              <a class="nav-link" href="../examples/euler/3D/toro1_x/index.html">Toro1 Riemann problem in X direction</a>
              <a class="nav-link" href="../examples/euler/3D/toro1_y/index.html">Toro1 Riemann problem in Y direction</a>
              <a class="nav-link" href="../examples/euler/3D/toro1_z/index.html">Toro1 Riemann problem in Z direction</a>
              <a class="nav-link" href="../examples/euler/3D/vorticity/index.html">Vorticity Test Case</a>

                </nav>

                </nav>
              <a class="nav-link" href="../examples/heat/index.html">Heat Conduction</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/heat/1D/index.html">Heat Conduction in 1D</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/heat/1D/sinus_temperature/index.html">Sinus Function Changing Temperature</a>

                </nav>
              <a class="nav-link" href="../examples/heat/2D/index.html">Heat Conduction in 2D</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/heat/2D/sinus_temperature/index.html">Sinus Function Changing Temperature</a>

                </nav>
              <a class="nav-link" href="../examples/heat/3D/index.html">Heat Conduction in 3D</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/heat/3D/sinus_temperature/index.html">Sinus Function Changing Temperature</a>

                </nav>

                </nav>
              <a class="nav-link" href="../examples/lineareuler/index.html">Linearized Euler Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/lineareuler/2D/index.html">2D Linearized Euler Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/lineareuler/2D/gauss_pulse/index.html">Gaussian pulse in pressure with 2d linearized Euler equations</a>
              <a class="nav-link" href="../examples/lineareuler/2D/transientBackground/index.html">Transient background state in 2D linearized Euler</a>

                </nav>
              <a class="nav-link" href="../examples/lineareuler/3D/index.html">3D Linearized Euler Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/lineareuler/3D/gauss_pulse/index.html">Gaussian pulse in density for 3D linearized Euler equations</a>
              <a class="nav-link" href="../examples/lineareuler/3D/gradient/index.html">Tracking of gradients in 3D linearized Euler equations</a>
              <a class="nav-link" href="../examples/lineareuler/3D/transientBackground/index.html">Transient background state in 3D linearized Euler</a>

                </nav>

                </nav>
              <a class="nav-link" href="../examples/maxwell/index.html">Maxwell Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/maxwell/pec_scatter_inhomogenous_matFun_Q8_3D/index.html">Perfectly_scatter_Inhomogenous_Materia</a>
              <a class="nav-link" href="../examples/maxwell/pec_scatter_inhomogenous_matVar_Q8_3D/index.html">Perfectly_scatter_Inhomogenous_Materia</a>
              <a class="nav-link" href="../examples/maxwell/periodic_oscillator_P8_3D/index.html">Periodic_Oscillator</a>
              <a class="nav-link" href="../examples/maxwell/periodic_oscillator_Q8_3D/index.html">Periodic_Oscillator</a>
              <a class="nav-link" href="../examples/maxwell/rectangular_wave_Q8_3D/index.html">Rectangle Wave</a>

                </nav>
              <a class="nav-link" href="../examples/maxwelldivcorr/index.html">Maxwell Equations With Divergence Correction</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/maxwelldivcorr/periodic_oscillator_P8_3D/index.html">Periodic_Oscillator</a>
              <a class="nav-link" href="../examples/maxwelldivcorr/periodic_oscillator_Q8_3D/index.html">Periodic_Oscillator</a>

                </nav>
              <a class="nav-link" href="../examples/maxwellpml/index.html">Maxwell Equations With Perfectly Matched Layers</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/maxwellpml/cylinder_scattering_Q8_2D/index.html">Perfectly matched Layer test case</a>

                </nav>
              <a class="nav-link" href="../examples/navierstokes/index.html">Navier-Stokes Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/navierstokes/2D/index.html">2D Navier-Stokes Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/navierstokes/2D/constant_state/index.html">Constant State</a>
              <a class="nav-link" href="../examples/navierstokes/2D/shear_hat/index.html">Shear hat 2D</a>
              <a class="nav-link" href="../examples/navierstokes/2D/viscous_vortex/index.html">Viscous Vortex (TGV) 2D</a>

                </nav>
              <a class="nav-link" href="../examples/navierstokes/3D/index.html">3D Navier-Stokes Equations</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="../examples/navierstokes/3D/shear_hat/index.html">Shear hat 3D</a>
              <a class="nav-link" href="../examples/navierstokes/3D/shear_tube/index.html">Shear tube 3D</a>

                </nav>

                </nav>

                </nav>
              <a class="nav-link" href="../init.html">Initialization</a>
              <a class="nav-link" href="../material.html">Material</a>
              <a class="nav-link" href="../neumann_boundaries.html">Neumann boundary conditions</a>
              <a class="nav-link" href="../new_eqn_system.html">Introducing a New Equation System</a>
              <a class="nav-link" href="../polynomials.html">Polynomials Library</a>
              <a class="nav-link" href="../postprocess_filtering.html">Postprocess Filtering</a>
              <a class="nav-link" href="index.html">Tutorial</a>
                <nav class="nav nav-pills flex-column">
                                <a class="nav-link" href="euler.html">Euler Testcase</a>
              <a class="nav-link" href="general.html">General Input File Information</a>
              <a class="nav-link" href="maxwell.html">Maxwell Testcase</a>
              <a class="nav-link" href="postprocessing.html">Postprocessing with atl_harvesting</a>
              <a class="nav-link" href="procedure.html">General Procedure for Running the Testcases</a>
              <a class="nav-link active disabled" href="source_term.html">Source Term</a>
              <a class="nav-link" href="tracking.html">Tracking</a>

                </nav>
          </nav>
        </div>
      </div>

    <div class="col-9" id='text'>
      <p>This example shows how to define a source term
for the <a href="maxwell.html">Maxwell testcase</a>.
Thus, you find the source code for this example commented out
in the configuration file of the Maxwell testcase.</p>
<p>In this Lua file, we define a source term with the keyword <code>source_terms</code>.
Moreover we need to give the solver a <code>shape</code> (point, line, or plane. See
<a href="tracking.html#tracking-shape">Tracking Shape</a>)
where the source terms will be active.
For all elements within this shape, the function <code>fun</code> will be calculated
and then changes the right hand side of the underlying equation system.</p>
<p>In the testcase we use a cube with a point source located in the middle.
This point source changes the current with time according to a sinus function.</p>
<p>At the beginning, we specify some variables which define the source
and will be used in the function.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ... charge of the source</span>
<span class="n">Q</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="c1">-- ... radius of sphere source</span>
<span class="n">r</span> <span class="o">=</span> <span class="mf">0.4</span>
<span class="c1">-- ... parameters for the analytic solution</span>
<span class="n">freq</span> <span class="o">=</span> <span class="p">(</span> <span class="mf">2.0</span><span class="o">*</span><span class="nb">math.pi</span><span class="o">/</span><span class="nb">math.sqrt</span><span class="p">(</span><span class="n">mu</span><span class="o">*</span><span class="n">epsi</span><span class="p">)</span> <span class="p">)</span>
<span class="c1">-- ... the temporal period of the waveguide</span>
<span class="n">T</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">*</span><span class="nb">math.pi</span><span class="o">/</span><span class="n">freq</span>
</code></pre></div>

<p>Next we define the function for the point source.
In Maxwell equations, we are talking about space charges and current densities.
In general they can depend on spatial coordinates and time.
Here we define the current in each direction
with a sinus function with the frequency defined as above.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">-- function for the point source</span>
<span class="kr">function</span> <span class="nf">currentDensitySpaceTime</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
  <span class="n">d</span> <span class="o">=</span> <span class="nb">math.sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">^</span><span class="mf">2.0</span><span class="o">+</span><span class="n">y</span><span class="o">^</span><span class="mf">2.0</span><span class="o">+</span><span class="n">z</span><span class="o">^</span><span class="mf">2.0</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="kr">then</span>
    <span class="n">jx</span><span class="o">=</span><span class="n">Q</span><span class="o">*</span><span class="n">r</span><span class="o">*</span><span class="n">freq</span><span class="o">*</span><span class="nb">math.sin</span><span class="p">(</span><span class="n">freq</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1000.0</span>
    <span class="n">jy</span><span class="o">=</span><span class="n">Q</span><span class="o">*</span><span class="n">r</span><span class="o">*</span><span class="n">freq</span><span class="o">*</span><span class="nb">math.sin</span><span class="p">(</span><span class="n">freq</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
    <span class="n">jz</span><span class="o">=</span><span class="n">Q</span><span class="o">*</span><span class="n">r</span><span class="o">*</span><span class="n">freq</span><span class="o">*</span><span class="nb">math.sin</span><span class="p">(</span><span class="n">freq</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
    <span class="kr">return</span> <span class="p">{</span><span class="n">jx</span><span class="p">,</span><span class="n">jy</span><span class="p">,</span><span class="n">jz</span><span class="p">}</span>
  <span class="kr">else</span>
    <span class="kr">return</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">}</span>
  <span class="kr">end</span>
<span class="kr">end</span>
</code></pre></div>

<p>In the if statement <code>d&lt;=r</code>, <code>d</code> is the distance
of the actually coordinates (x,y,z) from the source in the centre of the box
and <code>r</code> is the radius which we specified above.
This if statement guarantees that the point source
will be a sphere of radius <code>r</code>
(Remember, Ateles is working on voxel cubes defined by the octree).
Thus for all elements which are lying in the <code>shape</code> the source term is active.
If the refinement level is not high enough,
the elements might be larger then the source should be.
Hence, this can be controlled by a condition.</p>
<p>Finally the source term is defined.</p>
<div class="codehilite"><pre><span></span><code><span class="c1">-- define the source term</span>
<span class="n">source_terms</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;current_density&#39;</span><span class="p">,</span>
  <span class="n">ncomponents</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">current_density</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;lua_fun&#39;</span><span class="p">,</span>
    <span class="n">fun</span> <span class="o">=</span> <span class="n">currentDensitySpaceTime</span><span class="p">,</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="p">{</span>
      <span class="n">kind</span> <span class="o">=</span> <span class="s1">&#39;canoND&#39;</span><span class="p">,</span>
      <span class="n">object</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,},</span>
        <span class="n">vec</span> <span class="o">=</span> <span class="p">{{</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">},</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">},</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">}},</span>
        <span class="n">segments</span> <span class="o">=</span> <span class="p">{</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p><code>ncomponents</code> specifies how many variables the source term deals with.
Actually, this means how many return values the source term function has.
In the maxwell case there are the three currents jx, jy,jz, so <code>ncomponents</code> 
has to be 3.
Next, in current_density (the <code>name</code> of the source) we define
which kind of <code>function</code> should be used.
As we want to control it from within the lua script, we need to make it a lua
function. Further, we give the name of the function <code>currentDenitySpaceTime</code>
which is already specified (see above).
The variable <code>shape</code> tells the solver in
which part of the computational domain the source term is active.
Similar to <a href="tracking.html#tracking-shape">tracking</a>,
this shape is defined as <code>kind = 'canoND'</code>.
In <code>object</code> all the properties of the shape are specified.
Hence, we give a starting point (<code>origin</code>) and 3 direction vectors (<code>vec</code>)
which define a cube inside the computational domain.
The origin should be added by a small offset to make sure it is loacted
inside an element and not on the border of the octree.
For each direction vector,
we specify an amount of subdevisions of these vector.
Make sure to specify enough segments
to take into account all the required elements in the shape.</p>
    </div>
  </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              Ateles
 was developed by University of Siegen<br>              &copy; 2025 
<br /><small>e739b33c2324</small></p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
 on 2025-05-16T20:35:24.643357+0000             </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>